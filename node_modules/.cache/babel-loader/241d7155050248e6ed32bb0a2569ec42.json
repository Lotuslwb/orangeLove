{"ast":null,"code":"import _ListView from \"antd-mobile/lib/list-view\";\nimport _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\n\nvar _class;\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { observer } from 'mobx-react';\n\nvar AppListView = observer(_class =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AppListView, _React$Component);\n\n  function AppListView(props) {\n    var _this;\n\n    _classCallCheck(this, AppListView);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AppListView).call(this, props));\n    _this.listStore = props.store;\n    _this.state = {};\n    return _this;\n  }\n\n  _createClass(AppListView, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var height = document.documentElement.clientHeight - ReactDOM.findDOMNode(this.listView).parentNode.offsetTop;\n      this.setState({\n        height: height\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          renderRow = _this$props.renderRow,\n          renderSeparator = _this$props.renderSeparator,\n          renderHeader = _this$props.renderHeader,\n          renderFooter = _this$props.renderFooter;\n      var style = {\n        height: this.state.height,\n        overflow: 'auto'\n      };\n      var props = {};\n\n      if (renderHeader) {\n        props.renderHeader = renderHeader;\n      }\n\n      return React.createElement(_ListView, _extends({\n        ref: function ref(el) {\n          return _this2.listView = el;\n        },\n        dataSource: this.listStore.dataSource\n      }, props, {\n        renderFooter: function renderFooter() {\n          return React.createElement(\"div\", {\n            style: {\n              textAlign: 'center'\n            }\n          }, _this2.listStore.noMore ? '已加载全部' : _this2.listStore.isLoading ? 'Loading...' : 'Loaded');\n        },\n        renderRow: renderRow,\n        renderSeparator: renderSeparator // style={style}\n        ,\n        pageSize: this.listStore.ps,\n        onScroll: function onScroll() {\n          console.log('scroll');\n        },\n        useBodyScroll: true,\n        scrollRenderAheadDistance: 500 // pullToRefresh={<PullToRefresh\n        //    refreshing={this.listStore.isRefreshing}\n        //    onRefresh={() => this.listStore.requestData()}\n        // />}\n        ,\n        onEndReached: function onEndReached() {\n          return _this2.listStore.loadMoreData();\n        },\n        onEndReachedThreshold: 10\n      }));\n    }\n  }]);\n\n  return AppListView;\n}(React.Component)) || _class;\n\nexport { AppListView as default };","map":{"version":3,"sources":["/Users/lotuslwb/Documents/MJobs/orangeLove/components/AppListView/index.js"],"names":["React","ReactDOM","observer","AppListView","props","listStore","store","state","height","document","documentElement","clientHeight","findDOMNode","listView","parentNode","offsetTop","setState","renderRow","renderSeparator","renderHeader","renderFooter","style","overflow","el","dataSource","textAlign","noMore","isLoading","ps","console","log","loadMoreData","Component"],"mappings":";;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,SAAQC,QAAR,QAAuB,YAAvB;;IAIqBC,W,GADpBD,Q;;;;;AAGG,uBAAYE,KAAZ,EAAmB;AAAA;;AAAA;;AACf,qFAAMA,KAAN;AACA,UAAKC,SAAL,GAAiBD,KAAK,CAACE,KAAvB;AACA,UAAKC,KAAL,GAAa,EAAb;AAHe;AAIlB;;;;wCAEmB;AAChB,UAAMC,MAAM,GAAGC,QAAQ,CAACC,eAAT,CAAyBC,YAAzB,GAAwCV,QAAQ,CAACW,WAAT,CAAqB,KAAKC,QAA1B,EAAoCC,UAApC,CAA+CC,SAAtG;AACA,WAAKC,QAAL,CAAc;AACVR,QAAAA,MAAM,EAANA;AADU,OAAd;AAGH;;;6BAEQ;AAAA;;AAAA,wBAC4D,KAAKJ,KADjE;AAAA,UACEa,SADF,eACEA,SADF;AAAA,UACaC,eADb,eACaA,eADb;AAAA,UAC8BC,YAD9B,eAC8BA,YAD9B;AAAA,UAC4CC,YAD5C,eAC4CA,YAD5C;AAEL,UAAMC,KAAK,GAAG;AACVb,QAAAA,MAAM,EAAE,KAAKD,KAAL,CAAWC,MADT;AAEVc,QAAAA,QAAQ,EAAE;AAFA,OAAd;AAIA,UAAMlB,KAAK,GAAG,EAAd;;AACA,UAAIe,YAAJ,EAAkB;AACdf,QAAAA,KAAK,CAACe,YAAN,GAAqBA,YAArB;AACH;;AACD,aACI;AACI,QAAA,GAAG,EAAE,aAAAI,EAAE;AAAA,iBAAI,MAAI,CAACV,QAAL,GAAgBU,EAApB;AAAA,SADX;AAEI,QAAA,UAAU,EAAE,KAAKlB,SAAL,CAAemB;AAF/B,SAGQpB,KAHR;AAII,QAAA,YAAY,EAAE;AAAA,iBAAO;AAAK,YAAA,KAAK,EAAE;AAACqB,cAAAA,SAAS,EAAE;AAAZ;AAAZ,aAChB,MAAI,CAACpB,SAAL,CAAeqB,MAAf,GAAwB,OAAxB,GAAmC,MAAI,CAACrB,SAAL,CAAesB,SAAf,GAA2B,YAA3B,GAA0C,QAD7D,CAAP;AAAA,SAJlB;AAOI,QAAA,SAAS,EAAEV,SAPf;AAQI,QAAA,eAAe,EAAEC,eARrB,CASI;AATJ;AAUI,QAAA,QAAQ,EAAE,KAAKb,SAAL,CAAeuB,EAV7B;AAWI,QAAA,QAAQ,EAAE,oBAAM;AACZC,UAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACH,SAbL;AAcI,QAAA,aAAa,MAdjB;AAeI,QAAA,yBAAyB,EAAE,GAf/B,CAgBI;AACA;AACA;AACA;AAnBJ;AAoBI,QAAA,YAAY,EAAE;AAAA,iBAAM,MAAI,CAACzB,SAAL,CAAe0B,YAAf,EAAN;AAAA,SApBlB;AAqBI,QAAA,qBAAqB,EAAE;AArB3B,SADJ;AAyBH;;;;EAlDoC/B,KAAK,CAACgC,S;;SAA1B7B,W","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {observer} from 'mobx-react';\nimport {ListView, PullToRefresh} from 'antd-mobile';\n\n@observer\nexport default class AppListView extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.listStore = props.store;\n        this.state = {};\n    }\n\n    componentDidMount() {\n        const height = document.documentElement.clientHeight - ReactDOM.findDOMNode(this.listView).parentNode.offsetTop;\n        this.setState({\n            height,\n        });\n    }\n\n    render() {\n        const {renderRow, renderSeparator, renderHeader, renderFooter} = this.props;\n        const style = {\n            height: this.state.height,\n            overflow: 'auto',\n        };\n        const props = {};\n        if (renderHeader) {\n            props.renderHeader = renderHeader;\n        }\n        return (\n            <ListView\n                ref={el => this.listView = el}\n                dataSource={this.listStore.dataSource}\n                {...props}\n                renderFooter={() => (<div style={{textAlign: 'center'}}>\n                    {this.listStore.noMore ? '已加载全部' : (this.listStore.isLoading ? 'Loading...' : 'Loaded')}\n                </div>)}\n                renderRow={renderRow}\n                renderSeparator={renderSeparator}\n                // style={style}\n                pageSize={this.listStore.ps}\n                onScroll={() => {\n                    console.log('scroll');\n                }}\n                useBodyScroll\n                scrollRenderAheadDistance={500}\n                // pullToRefresh={<PullToRefresh\n                //    refreshing={this.listStore.isRefreshing}\n                //    onRefresh={() => this.listStore.requestData()}\n                // />}\n                onEndReached={() => this.listStore.loadMoreData()}\n                onEndReachedThreshold={10}\n            />\n        );\n    }\n\n\n}"]},"metadata":{},"sourceType":"module"}