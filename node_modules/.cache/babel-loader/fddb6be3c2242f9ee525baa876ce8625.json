{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React, { Component } from 'react';\nimport Head from 'next/head';\nimport agent from \"../utils/agent\";\nimport Router from 'next/router';\nimport storage from \"../utils/storage\";\nimport { isWeixinBrowser } from \"../utils/utils\";\n\nvar PageWrapper = function PageWrapper(ComposedComponent) {\n  var AppLayout =\n  /*#__PURE__*/\n  function (_Component) {\n    _inherits(AppLayout, _Component);\n\n    function AppLayout(props) {\n      var _this;\n\n      _classCallCheck(this, AppLayout);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(AppLayout).call(this, props));\n      _this.state = {\n        telegramLogin: false\n      };\n      return _this;\n    }\n\n    _createClass(AppLayout, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        var query = this.props.query;\n        var user = storage.UserInfo.get();\n        var isWeixin = isWeixinBrowser();\n        this.setState({\n          isWeixin: isWeixin\n        });\n\n        if (!user) {\n          if (isWeixin) {\n            if (!query.code) {\n              agent.Wechat.getAuthorizationUrl().then(function (data) {\n                console.log(data);\n                Router.replace(data);\n              });\n            } else {\n              agent.Wechat.login(query.code).then(function (data) {\n                storage.UserInfo.set(data);\n              });\n            }\n          } else {// this.setState({\n            //     telegramLogin: true,\n            // });\n          }\n        } else {}\n\n        window.onTelegramAuth = function (user) {\n          agent.Telegram.login(user).then(function (user) {\n            storage.UserInfo.set(user); // this.setState({\n            //     telegramLogin: false,\n            // });\n          });\n        };\n\n        if (isWeixin) {\n          agent.Wechat.getConfig().then(function (data) {\n            // data.debug = true;\n            data.jsApiList = ['chooseImage'];\n            wx.config(data);\n            wx.checkJsApi({\n              jsApiList: ['chooseImage'],\n              // 需要检测的JS接口列表，所有JS接口列表见附录2,\n              success: function success(res) {}\n            });\n          });\n        }\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        return React.createElement(\"div\", null, !this.state.telegramLogin && React.createElement(_JSXStyle, {\n          id: \"1853472643\"\n        }, \"#telegram-login-GegoCnBot{display:none;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sb3R1c2x3Yi9Eb2N1bWVudHMvTUpvYnMvb3JhbmdlTG92ZS9jb21wb25lbnRzL1BhZ2VXcmFwcGVyX3JlYWwuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBa0ZxRSxBQUdvQixhQUNiIiwiZmlsZSI6Ii9Vc2Vycy9sb3R1c2x3Yi9Eb2N1bWVudHMvTUpvYnMvb3JhbmdlTG92ZS9jb21wb25lbnRzL1BhZ2VXcmFwcGVyX3JlYWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHtDb21wb25lbnR9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBIZWFkIGZyb20gJ25leHQvaGVhZCc7XG5pbXBvcnQgYWdlbnQgZnJvbSAnQHV0aWxzL2FnZW50JztcbmltcG9ydCBSb3V0ZXIgZnJvbSAnbmV4dC9yb3V0ZXInXG5pbXBvcnQgc3RvcmFnZSBmcm9tICdAdXRpbHMvc3RvcmFnZSc7XG5pbXBvcnQge2lzV2VpeGluQnJvd3Nlcn0gZnJvbSAnQHV0aWxzL3V0aWxzJztcblxuY29uc3QgUGFnZVdyYXBwZXIgPSAoQ29tcG9zZWRDb21wb25lbnQpID0+IHtcbiAgICBjbGFzcyBBcHBMYXlvdXQgZXh0ZW5kcyBDb21wb25lbnQge1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgICAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgdGVsZWdyYW1Mb2dpbjogZmFsc2UsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgc3RhdGljIGFzeW5jIGdldEluaXRpYWxQcm9wcyh7cmVzLCBxdWVyeX0pIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcXVlcnlcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgICAgIGNvbnN0IHtxdWVyeX0gPSB0aGlzLnByb3BzO1xuICAgICAgICAgICAgY29uc3QgdXNlciA9IHN0b3JhZ2UuVXNlckluZm8uZ2V0KCk7XG4gICAgICAgICAgICBjb25zdCBpc1dlaXhpbiA9IGlzV2VpeGluQnJvd3NlcigpO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgaXNXZWl4aW5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzV2VpeGluKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcXVlcnkuY29kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWdlbnQuV2VjaGF0LmdldEF1dGhvcml6YXRpb25VcmwoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGRhdGEgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUm91dGVyLnJlcGxhY2UoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFnZW50LldlY2hhdC5sb2dpbihxdWVyeS5jb2RlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGRhdGEgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yYWdlLlVzZXJJbmZvLnNldChkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgdGVsZWdyYW1Mb2dpbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgLy8gfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2luZG93Lm9uVGVsZWdyYW1BdXRoID0gKHVzZXIpID0+IHtcbiAgICAgICAgICAgICAgICBhZ2VudC5UZWxlZ3JhbS5sb2dpbih1c2VyKVxuICAgICAgICAgICAgICAgICAgICAudGhlbih1c2VyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JhZ2UuVXNlckluZm8uc2V0KHVzZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgdGVsZWdyYW1Mb2dpbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGlzV2VpeGluKSB7XG4gICAgICAgICAgICAgICAgYWdlbnQuV2VjaGF0LmdldENvbmZpZygpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGRhdGEgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGF0YS5kZWJ1ZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmpzQXBpTGlzdCA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY2hvb3NlSW1hZ2UnXG4gICAgICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgd3guY29uZmlnKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgd3guY2hlY2tKc0FwaSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNBcGlMaXN0OiBbJ2Nob29zZUltYWdlJ10sIC8vIOmcgOimgeajgOa1i+eahEpT5o6l5Y+j5YiX6KGo77yM5omA5pyJSlPmjqXlj6PliJfooajop4HpmYTlvZUyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZW5kZXIoKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgIHshdGhpcy5zdGF0ZS50ZWxlZ3JhbUxvZ2luICYmIDxzdHlsZSBqc3ggZ2xvYmFsPntgXG4gICAgICAjdGVsZWdyYW0tbG9naW4tR2Vnb0NuQm90IHtcbiAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICB9XG4gICAgYH08L3N0eWxlPn1cbiAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUudGVsZWdyYW1Mb2dpbiAmJiA8c3R5bGUganN4IGdsb2JhbD57YFxuICAgICAgI3RlbGVncmFtLWxvZ2luLUdlZ29DbkJvdCB7XG4gICAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgICB6LWluZGV4OiAyMDA7XG4gICAgICB0b3A6IDUwJTtcbiAgICAgIGxlZnQ6IDUwJTtcbiAgICAgIG1hcmdpbi10b3A6IC0yMHB4O1xuICAgICAgbWFyZ2luLWxlZnQ6IC0xMjBweDtcbiAgICAgIH1cbiAgICAgIC51LW1hc2sge1xuICAgICAgcG9zaXRpb246IGZpeGVkO1xuICAgICAgei1pbmRleDogMTAwO1xuICAgICAgdG9wOiAwOyBib3R0b206IDA7IGxlZnQ6IDA7IHJpZ2h0OiAwO1xuICAgICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAuNSk7XG4gICAgICB9XG4gICAgYH08L3N0eWxlPn1cbiAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUudGVsZWdyYW1Mb2dpbiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidS1tYXNrXCIvPlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8SGVhZD5cbiAgICAgICAgICAgICAgICAgICAgPC9IZWFkPlxuICAgICAgICAgICAgICAgICAgICA8Q29tcG9zZWRDb21wb25lbnQgey4uLnRoaXMucHJvcHN9IC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIEFwcExheW91dDtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFBhZ2VXcmFwcGVyOyJdfQ== */\\n/*@ sourceURL=/Users/lotuslwb/Documents/MJobs/orangeLove/components/PageWrapper_real.js */\"), this.state.telegramLogin && React.createElement(_JSXStyle, {\n          id: \"774196837\"\n        }, \"#telegram-login-GegoCnBot{position:fixed;z-index:200;top:50%;left:50%;margin-top:-20px;margin-left:-120px;}.u-mask{position:fixed;z-index:100;top:0;bottom:0;left:0;right:0;background:rgba(0,0,0,.5);}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sb3R1c2x3Yi9Eb2N1bWVudHMvTUpvYnMvb3JhbmdlTG92ZS9jb21wb25lbnRzL1BhZ2VXcmFwcGVyX3JlYWwuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBdUZvRSxBQUdzQixBQVFBLGVBUEgsQUFRQSxZQVBKLEFBUUYsTUFBVSxFQVBQLE9BT2UsRUFOUCxLQU1nQixRQUNKLElBTlYsbUJBQ25CLEdBTUEiLCJmaWxlIjoiL1VzZXJzL2xvdHVzbHdiL0RvY3VtZW50cy9NSm9icy9vcmFuZ2VMb3ZlL2NvbXBvbmVudHMvUGFnZVdyYXBwZXJfcmVhbC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwge0NvbXBvbmVudH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IEhlYWQgZnJvbSAnbmV4dC9oZWFkJztcbmltcG9ydCBhZ2VudCBmcm9tICdAdXRpbHMvYWdlbnQnO1xuaW1wb3J0IFJvdXRlciBmcm9tICduZXh0L3JvdXRlcidcbmltcG9ydCBzdG9yYWdlIGZyb20gJ0B1dGlscy9zdG9yYWdlJztcbmltcG9ydCB7aXNXZWl4aW5Ccm93c2VyfSBmcm9tICdAdXRpbHMvdXRpbHMnO1xuXG5jb25zdCBQYWdlV3JhcHBlciA9IChDb21wb3NlZENvbXBvbmVudCkgPT4ge1xuICAgIGNsYXNzIEFwcExheW91dCBleHRlbmRzIENvbXBvbmVudCB7XG5cbiAgICAgICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgICAgIHN1cGVyKHByb3BzKTtcblxuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICB0ZWxlZ3JhbUxvZ2luOiBmYWxzZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBzdGF0aWMgYXN5bmMgZ2V0SW5pdGlhbFByb3BzKHtyZXMsIHF1ZXJ5fSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBxdWVyeVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICAgICAgY29uc3Qge3F1ZXJ5fSA9IHRoaXMucHJvcHM7XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gc3RvcmFnZS5Vc2VySW5mby5nZXQoKTtcbiAgICAgICAgICAgIGNvbnN0IGlzV2VpeGluID0gaXNXZWl4aW5Ccm93c2VyKCk7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBpc1dlaXhpblxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNXZWl4aW4pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFxdWVyeS5jb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZ2VudC5XZWNoYXQuZ2V0QXV0aG9yaXphdGlvblVybCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSb3V0ZXIucmVwbGFjZShkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWdlbnQuV2VjaGF0LmxvZ2luKHF1ZXJ5LmNvZGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JhZ2UuVXNlckluZm8uc2V0KGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgICB0ZWxlZ3JhbUxvZ2luOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAvLyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aW5kb3cub25UZWxlZ3JhbUF1dGggPSAodXNlcikgPT4ge1xuICAgICAgICAgICAgICAgIGFnZW50LlRlbGVncmFtLmxvZ2luKHVzZXIpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKHVzZXIgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmFnZS5Vc2VySW5mby5zZXQodXNlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB0ZWxlZ3JhbUxvZ2luOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoaXNXZWl4aW4pIHtcbiAgICAgICAgICAgICAgICBhZ2VudC5XZWNoYXQuZ2V0Q29uZmlnKClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkYXRhLmRlYnVnID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuanNBcGlMaXN0ID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjaG9vc2VJbWFnZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgICAgICAgICB3eC5jb25maWcoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3eC5jaGVja0pzQXBpKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc0FwaUxpc3Q6IFsnY2hvb3NlSW1hZ2UnXSwgLy8g6ZyA6KaB5qOA5rWL55qESlPmjqXlj6PliJfooajvvIzmiYDmnIlKU+aOpeWPo+WIl+ihqOingemZhOW9lTIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgeyF0aGlzLnN0YXRlLnRlbGVncmFtTG9naW4gJiYgPHN0eWxlIGpzeCBnbG9iYWw+e2BcbiAgICAgICN0ZWxlZ3JhbS1sb2dpbi1HZWdvQ25Cb3Qge1xuICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgIH1cbiAgICBgfTwvc3R5bGU+fVxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS50ZWxlZ3JhbUxvZ2luICYmIDxzdHlsZSBqc3ggZ2xvYmFsPntgXG4gICAgICAjdGVsZWdyYW0tbG9naW4tR2Vnb0NuQm90IHtcbiAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgIHotaW5kZXg6IDIwMDtcbiAgICAgIHRvcDogNTAlO1xuICAgICAgbGVmdDogNTAlO1xuICAgICAgbWFyZ2luLXRvcDogLTIwcHg7XG4gICAgICBtYXJnaW4tbGVmdDogLTEyMHB4O1xuICAgICAgfVxuICAgICAgLnUtbWFzayB7XG4gICAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgICB6LWluZGV4OiAxMDA7XG4gICAgICB0b3A6IDA7IGJvdHRvbTogMDsgbGVmdDogMDsgcmlnaHQ6IDA7XG4gICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIC41KTtcbiAgICAgIH1cbiAgICBgfTwvc3R5bGU+fVxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS50ZWxlZ3JhbUxvZ2luICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ1LW1hc2tcIi8+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDxIZWFkPlxuICAgICAgICAgICAgICAgICAgICA8L0hlYWQ+XG4gICAgICAgICAgICAgICAgICAgIDxDb21wb3NlZENvbXBvbmVudCB7Li4udGhpcy5wcm9wc30gLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gQXBwTGF5b3V0O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgUGFnZVdyYXBwZXI7Il19 */\\n/*@ sourceURL=/Users/lotuslwb/Documents/MJobs/orangeLove/components/PageWrapper_real.js */\"), this.state.telegramLogin && React.createElement(\"div\", {\n          class: \"u-mask\"\n        }), React.createElement(Head, null), React.createElement(ComposedComponent, this.props));\n      }\n    }], [{\n      key: \"getInitialProps\",\n      value: function () {\n        var _ref = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee(_ref2) {\n          var res, query;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  res = _ref2.res, query = _ref2.query;\n                  return _context.abrupt(\"return\", {\n                    query: query\n                  });\n\n                case 2:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        function getInitialProps(_x) {\n          return _ref.apply(this, arguments);\n        }\n\n        return getInitialProps;\n      }()\n    }]);\n\n    return AppLayout;\n  }(Component);\n\n  return AppLayout;\n};\n\nexport default PageWrapper;","map":{"version":3,"sources":["/Users/lotuslwb/Documents/MJobs/orangeLove/components/PageWrapper_real.js"],"names":["React","Component","Head","agent","Router","storage","isWeixinBrowser","PageWrapper","ComposedComponent","AppLayout","props","state","telegramLogin","query","user","UserInfo","get","isWeixin","setState","code","Wechat","getAuthorizationUrl","then","data","console","log","replace","login","set","window","onTelegramAuth","Telegram","getConfig","jsApiList","wx","config","checkJsApi","success","res"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport Head from 'next/head';\nimport agent from '@utils/agent';\nimport Router from 'next/router'\nimport storage from '@utils/storage';\nimport {isWeixinBrowser} from '@utils/utils';\n\nconst PageWrapper = (ComposedComponent) => {\n    class AppLayout extends Component {\n\n        constructor(props) {\n            super(props);\n\n            this.state = {\n                telegramLogin: false,\n            };\n        }\n\n        static async getInitialProps({res, query}) {\n            return {\n                query\n            };\n        }\n\n        componentDidMount() {\n            const {query} = this.props;\n            const user = storage.UserInfo.get();\n            const isWeixin = isWeixinBrowser();\n            this.setState({\n                isWeixin\n            });\n            if (!user) {\n                if (isWeixin) {\n                    if (!query.code) {\n                        agent.Wechat.getAuthorizationUrl()\n                            .then(data => {\n                                console.log(data);\n                                Router.replace(data);\n                            })\n                    } else {\n                        agent.Wechat.login(query.code)\n                            .then(data => {\n                                storage.UserInfo.set(data);\n                            });\n                    }\n                } else {\n                    // this.setState({\n                    //     telegramLogin: true,\n                    // });\n                }\n            } else {\n\n            }\n            window.onTelegramAuth = (user) => {\n                agent.Telegram.login(user)\n                    .then(user => {\n                        storage.UserInfo.set(user);\n                        // this.setState({\n                        //     telegramLogin: false,\n                        // });\n                    });\n            };\n            if (isWeixin) {\n                agent.Wechat.getConfig()\n                    .then(data => {\n                        // data.debug = true;\n                        data.jsApiList = [\n                            'chooseImage'\n                        ];\n                        wx.config(data);\n                        wx.checkJsApi({\n                            jsApiList: ['chooseImage'], // 需要检测的JS接口列表，所有JS接口列表见附录2,\n                            success: function (res) {\n                            }\n                        });\n                    });\n            }\n        }\n\n        render() {\n            return (\n                <div>\n                    {!this.state.telegramLogin && <style jsx global>{`\n      #telegram-login-GegoCnBot {\n      display: none;\n      }\n    `}</style>}\n                    {this.state.telegramLogin && <style jsx global>{`\n      #telegram-login-GegoCnBot {\n      position: fixed;\n      z-index: 200;\n      top: 50%;\n      left: 50%;\n      margin-top: -20px;\n      margin-left: -120px;\n      }\n      .u-mask {\n      position: fixed;\n      z-index: 100;\n      top: 0; bottom: 0; left: 0; right: 0;\n      background: rgba(0, 0, 0, .5);\n      }\n    `}</style>}\n                    {this.state.telegramLogin && (\n                        <div class=\"u-mask\"/>\n                    )}\n                    <Head>\n                    </Head>\n                    <ComposedComponent {...this.props} />\n                </div>\n            );\n        }\n    }\n\n    return AppLayout;\n};\n\nexport default PageWrapper;"]},"metadata":{},"sourceType":"module"}